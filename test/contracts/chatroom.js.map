{
  "version": 3,
  "sources": ["../../node_modules/@sbp/sbp/dist/module.mjs", "../../frontend/common/common.js", "../../frontend/common/vSafeHtml.js", "../../frontend/model/contracts/shared/giLodash.js", "../../frontend/common/translations.js", "../../frontend/common/stringTemplate.js", "../../frontend/model/contracts/shared/constants.js", "../../frontend/model/contracts/misc/flowTyper.js", "../../frontend/model/contracts/shared/types.js", "../../frontend/model/contracts/shared/time.js", "../../frontend/views/utils/misc.js", "../../frontend/model/contracts/shared/functions.js", "../../frontend/model/contracts/shared/nativeNotification.js", "../../frontend/model/contracts/chatroom.js"],
  "sourcesContent": ["// \n\n'use strict'\n\n\nconst selectors = {}\nconst domains = {}\nconst globalFilters = []\nconst domainFilters = {}\nconst selectorFilters = {}\nconst unsafeSelectors = {}\n\nconst DOMAIN_REGEX = /^[^/]+/\n\nfunction sbp (selector, ...data) {\n  const domain = domainFromSelector(selector)\n  if (!selectors[selector]) {\n    throw new Error(`SBP: selector not registered: ${selector}`)\n  }\n  // Filters can perform additional functions, and by returning `false` they\n  // can prevent the execution of a selector. Check the most specific filters first.\n  for (const filters of [selectorFilters[selector], domainFilters[domain], globalFilters]) {\n    if (filters) {\n      for (const filter of filters) {\n        if (filter(domain, selector, data) === false) return\n      }\n    }\n  }\n  return selectors[selector].call(domains[domain].state, ...data)\n}\n\nexport function domainFromSelector (selector) {\n  const domainLookup = DOMAIN_REGEX.exec(selector)\n  if (domainLookup === null) {\n    throw new Error(`SBP: selector missing domain: ${selector}`)\n  }\n  return domainLookup[0]\n}\n\nconst SBP_BASE_SELECTORS = {\n  'sbp/selectors/register': function (sels) {\n    const registered = []\n    for (const selector in sels) {\n      const domain = domainFromSelector(selector)\n      if (selectors[selector]) {\n        (console.warn || console.log)(`[SBP WARN]: not registering already registered selector: '${selector}'`)\n      } else if (typeof sels[selector] === 'function') {\n        if (unsafeSelectors[selector]) {\n          // important warning in case we loaded any malware beforehand and aren't expecting this\n          (console.warn || console.log)(`[SBP WARN]: registering unsafe selector: '${selector}' (remember to lock after overwriting)`)\n        }\n        const fn = selectors[selector] = sels[selector]\n        registered.push(selector)\n        // ensure each domain has a domain state associated with it\n        if (!domains[domain]) {\n          domains[domain] = { state: {} }\n        }\n        // call the special _init function immediately upon registering\n        if (selector === `${domain}/_init`) {\n          fn.call(domains[domain].state)\n        }\n      }\n    }\n    return registered\n  },\n  'sbp/selectors/unregister': function (sels) {\n    for (const selector of sels) {\n      if (!unsafeSelectors[selector]) {\n        throw new Error(`SBP: can't unregister locked selector: ${selector}`)\n      }\n      delete selectors[selector]\n    }\n  },\n  'sbp/selectors/overwrite': function (sels) {\n    sbp('sbp/selectors/unregister', Object.keys(sels))\n    return sbp('sbp/selectors/register', sels)\n  },\n  'sbp/selectors/unsafe': function (sels) {\n    for (const selector of sels) {\n      if (selectors[selector]) {\n        throw new Error('unsafe must be called before registering selector')\n      }\n      unsafeSelectors[selector] = true\n    }\n  },\n  'sbp/selectors/lock': function (sels) {\n    for (const selector of sels) {\n      delete unsafeSelectors[selector]\n    }\n  },\n  'sbp/selectors/fn': function (sel) {\n    return selectors[sel]\n  },\n  'sbp/filters/global/add': function (filter) {\n    globalFilters.push(filter)\n  },\n  'sbp/filters/domain/add': function (domain, filter) {\n    if (!domainFilters[domain]) domainFilters[domain] = []\n    domainFilters[domain].push(filter)\n  },\n  'sbp/filters/selector/add': function (selector, filter) {\n    if (!selectorFilters[selector]) selectorFilters[selector] = []\n    selectorFilters[selector].push(filter)\n  }\n}\n\nSBP_BASE_SELECTORS['sbp/selectors/register'](SBP_BASE_SELECTORS)\n\nexport default sbp\n", "'use strict'\n\n// This file allows us to deduplicate some code between the main app bundle and\n// the slim'd down contract bundles.\n// Any large shared dependencies between the contracts - that are unlikely to ever\n// change - go into this file. For example, we are using Vue between the frontend\n// and the contracts (for the Vue.set/Vue.delete functions), and those are unlikely\n// to ever change in their behavior. Therefore it's a perfect candidate to go in\n// this file, resulting a smaller overall bundle for the contract slim builds.\n// All other in-project code that's shared between the contracts should be\n// placed under 'frontend/model/contracts/shared/' and imported directly\n// from both the app and the contracts. This will result in some duplicated code being\n// loaded by the contracts (even the slim'd versions) and the main app, however,\n// it will ensure the safe and consistent operation of contracts, minimizing the\n// likelihood that there will ever be a conflict between their state and what the UI\n// expects the behavior to be.\n\n// EVERYTHING EXPORTED BY THIS FILE MUST ALWAYS AND ONLY BE IMPORTED\n// VIA \"/assets/js/common.js\"!\n// DO NOT CHANGE THE BEHAVIOR OF ANYTHING IMPORTED BY THIS FILE THAT AFFECTS THE\n// BEHAVIOR OF CONTRACTS IN ANY MEANINGFUL WAY!\n// Doing otherwise defeats the purpose of this file and could lead to bugs and conflicts!\n// You may *add* behavior, but never modify or remove it.\n\nexport { default as Vue } from 'vue'\nexport { default as L } from './translations.js'\nexport * from './translations.js'\nexport * from './errors.js'\nexport * as Errors from './errors.js'\n", "/*\n * Copyright GitLab B.V.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n/*\n * This file is mainly a copy of the `safe-html.js` directive found in the\n * [gitlab-ui](https://gitlab.com/gitlab-org/gitlab-ui) project,\n * slightly modifed for linting purposes and to immediately register it via\n * `Vue.directive()` rather than exporting it, consistently with our other\n * custom Vue directives.\n */\n\nimport dompurify from 'dompurify'\nimport Vue from 'vue'\nimport { cloneDeep } from '~/frontend/model/contracts/shared/giLodash.js'\n\n// See https://github.com/cure53/DOMPurify#can-i-configure-dompurify\nexport const defaultConfig = {\n  ALLOWED_ATTR: ['class'],\n  ALLOWED_TAGS: ['b', 'br', 'em', 'i', 'p', 'small', 'span', 'strong', 'sub', 'sup', 'u'],\n  // This option was in the original file.\n  RETURN_DOM_FRAGMENT: true\n}\n\nconst transform = (el, binding) => {\n  if (binding.oldValue !== binding.value) {\n    let config = defaultConfig\n    if (binding.arg === 'a') {\n      config = cloneDeep(config)\n      config.ALLOWED_ATTR.push('href', 'target')\n      config.ALLOWED_TAGS.push('a')\n    }\n    el.textContent = ''\n    el.appendChild(dompurify.sanitize(binding.value, config))\n  }\n}\n\n/*\n * Register a global custom directive called `v-safe-html`.\n *\n * Please use this instead of `v-html` everywhere user input is expected,\n *   in order to avoid XSS vulnerabilities.\n *\n * See https://github.com/okTurtles/group-income/issues/975\n */\n\nVue.directive('safe-html', {\n  bind: transform,\n  update: transform\n})\n", "// manually implemented lodash functions are better than even:\n// https://github.com/lodash/babel-plugin-lodash\n// additional tiny versions of lodash functions are available in VueScript2\n\nexport function mapValues (obj /*: Object */, fn /*: Function */, o /*: Object */ = {}) /*: any */ {\n  for (const key in obj) { o[key] = fn(obj[key]) }\n  return o\n}\n\nexport function mapObject (obj /*: Object */, fn /*: Function */) /*: {[any]: any} */ {\n  return Object.fromEntries(Object.entries(obj).map(fn))\n}\n\nexport function pick (o /*: Object */, props /*: string[] */) /*: Object */ {\n  const x = {}\n  for (const k of props) { x[k] = o[k] }\n  return x\n}\n\nexport function pickWhere (o /*: Object */, where /*: Function */) /*: Object */ {\n  const x = {}\n  for (const k in o) {\n    if (where(o[k])) { x[k] = o[k] }\n  }\n  return x\n}\n\nexport function choose (array /*: Array<*> */, indices /*: Array<number> */) /*: Array<*> */ {\n  const x = []\n  for (const idx of indices) { x.push(array[idx]) }\n  return x\n}\n\nexport function omit (o /*: Object */, props /*: string[] */) /*: {...} */ {\n  const x = {}\n  for (const k in o) {\n    if (!props.includes(k)) {\n      x[k] = o[k]\n    }\n  }\n  return x\n}\n\nexport function cloneDeep (obj /*: Object */) /*: any */ {\n  return JSON.parse(JSON.stringify(obj))\n}\n\nfunction isMergeableObject (val) {\n  const nonNullObject = val && typeof val === 'object'\n  // $FlowFixMe\n  return nonNullObject && Object.prototype.toString.call(val) !== '[object RegExp]' && Object.prototype.toString.call(val) !== '[object Date]'\n}\n\nexport function merge (obj /*: Object */, src /*: Object */) /*: any */ {\n  for (const key in src) {\n    const clone = isMergeableObject(src[key]) ? cloneDeep(src[key]) : undefined\n    if (clone && isMergeableObject(obj[key])) {\n      merge(obj[key], clone)\n      continue\n    }\n    obj[key] = clone || src[key]\n  }\n  return obj\n}\n\nexport function delay (msec /*: number */) /*: Promise<void> */ {\n  return new Promise((resolve, reject) => {\n    setTimeout(resolve, msec)\n  })\n}\n\nexport function randomBytes (length /*: number */) /*: Uint8Array */ {\n  // $FlowIssue crypto support: https://github.com/facebook/flow/issues/5019\n  return crypto.getRandomValues(new Uint8Array(length))\n}\n\nexport function randomHexString (length /*: number */) /*: string */ {\n  return Array.from(randomBytes(length), byte => (byte % 16).toString(16)).join('')\n}\n\nexport function randomIntFromRange (min /*: number */, max /*: number */) /*: number */ {\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n\nexport function randomFromArray (arr /*: any[] */) /*: any */ {\n  return arr[Math.floor(Math.random() * arr.length)]\n}\n\nexport function flatten (arr /*: Array<*> */) /*: Array<any> */ {\n  let flat /*: Array<*> */ = []\n  for (let i = 0; i < arr.length; i++) {\n    if (Array.isArray(arr[i])) {\n      flat = flat.concat(arr[i])\n    } else {\n      flat.push(arr[i])\n    }\n  }\n  return flat\n}\n\nexport function zip () /*: any[] */ {\n  // $FlowFixMe\n  const arr = Array.prototype.slice.call(arguments)\n  const zipped = []\n  let max = 0\n  arr.forEach((current) => (max = Math.max(max, current.length)))\n  for (const current of arr) {\n    for (let i = 0; i < max; i++) {\n      zipped[i] = zipped[i] || []\n      zipped[i].push(current[i])\n    }\n  }\n  return zipped\n}\n\nexport function uniq (array /*: any[] */) /*: any[] */ {\n  return Array.from(new Set(array))\n}\n\nexport function union (...arrays /*: any[][] */) /*: any[] */ {\n  // $FlowFixMe\n  return uniq([].concat.apply([], arrays))\n}\n\nexport function intersection (a1 /*: any[] */, ...arrays /*: any[][] */) /*: any[] */ {\n  return uniq(a1).filter(v1 => arrays.every(v2 => v2.indexOf(v1) >= 0))\n}\n\nexport function difference (a1 /*: any[] */, ...arrays /*: any[][] */) /*: any[] */ {\n  // $FlowFixMe\n  const a2 = [].concat.apply([], arrays)\n  return a1.filter(v => a2.indexOf(v) === -1)\n}\n\nexport function deepEqualJSONType (a /*: any */, b /*: any */) /*: boolean */ {\n  if (a === b) return true\n  if (a === null || b === null || typeof (a) !== typeof (b)) return false\n  if (typeof a !== 'object') return a === b\n  if (Array.isArray(a)) {\n    if (a.length !== b.length) return false\n  } else if (a.constructor.name !== 'Object') {\n    throw new Error(`not JSON type: ${a}`)\n  }\n  for (const key in a) {\n    if (!deepEqualJSONType(a[key], b[key])) return false\n  }\n  return true\n}\n\n/**\n * Modified version of: https://github.com/component/debounce/blob/master/index.js\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear'\n * that is a function which will clear the timer to prevent previously scheduled executions.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nexport function debounce (func /*: Function */, wait /*: number */, immediate /*: ?boolean */) /*: Function */ {\n  let timeout, args, context, timestamp, result\n  if (wait == null) wait = 100\n\n  function later () {\n    const last = Date.now() - timestamp\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last)\n    } else {\n      timeout = null\n      if (!immediate) {\n        result = func.apply(context, args)\n        context = args = null\n      }\n    }\n  }\n\n  const debounced = function () {\n    context = this\n    args = arguments\n    timestamp = Date.now()\n    const callNow = immediate && !timeout\n    if (!timeout) timeout = setTimeout(later, wait)\n    if (callNow) {\n      result = func.apply(context, args)\n      context = args = null\n    }\n\n    return result\n  }\n\n  debounced.clear = function () {\n    if (timeout) {\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }\n\n  debounced.flush = function () {\n    if (timeout) {\n      result = func.apply(context, args)\n      context = args = null\n      clearTimeout(timeout)\n      timeout = null\n    }\n  }\n\n  return debounced\n}\n\n/**\n * Gets the value at `path` of `obj`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n */\nexport function get (obj /*: Object */, path /*: string[] */, defaultValue /*: any */) /*: any */ {\n  if (!path.length) {\n    return obj\n  } else if (obj === undefined) {\n    return defaultValue\n  }\n\n  let result = obj\n  let i = 0\n  while (result && i < path.length) {\n    result = result[path[i]]\n    i++\n  }\n\n  return result === undefined ? defaultValue : result\n}\n", "'use strict'\n\n// since this file is loaded by common.js, we avoid circular imports and directly import\nimport sbp from '@sbp/sbp'\nimport { defaultConfig as defaultDompurifyConfig } from './vSafeHtml.js'\nimport dompurify from 'dompurify'\nimport Vue from 'vue'\nimport template from './stringTemplate.js'\n\nVue.prototype.L = L\nVue.prototype.LTags = LTags\n\nconst defaultLanguage = 'en-US'\nconst defaultLanguageCode = 'en'\nconst defaultTranslationTable                       = {}\n\n/**\n * Allow 'href' and 'target' attributes to avoid breaking our hyperlinks,\n * but keep sanitizing their values.\n * See https://github.com/cure53/DOMPurify#can-i-configure-dompurify\n */\nconst dompurifyConfig = {\n  ...defaultDompurifyConfig,\n  ALLOWED_ATTR: ['class', 'href', 'rel', 'target'],\n  ALLOWED_TAGS: ['a', 'b', 'br', 'button', 'em', 'i', 'p', 'small', 'span', 'strong', 'sub', 'sup', 'u'],\n  RETURN_DOM_FRAGMENT: false\n}\n\nlet currentLanguage = defaultLanguage\nlet currentLanguageCode = defaultLanguage.split('-')[0]\nlet currentTranslationTable = defaultTranslationTable\n\n/**\n * Loads the translation file corresponding to a given language.\n *\n * @param language - A BPC-47 language tag like the value\n * of `navigator.language`.\n *\n * Language tags must be compared in a case-insensitive way (\u00A72.1.1.).\n *\n * @see https://tools.ietf.org/rfc/bcp/bcp47.txt\n */\nsbp('sbp/selectors/register', {\n  'translations/init': async function init (language        )                {\n    // A language code is usually the first part of a language tag.\n    const [languageCode] = language.toLowerCase().split('-')\n\n    // No need to do anything if the requested language is already in use.\n    if (language.toLowerCase() === currentLanguage.toLowerCase()) return\n\n    // We can also return early if only the language codes match,\n    //   since we don't have culture-specific translations yet.\n    if (languageCode === currentLanguageCode) return\n\n    // Avoid fetching any ressource if the requested language is the default one.\n    if (languageCode === defaultLanguageCode) {\n      currentLanguage = defaultLanguage\n      currentLanguageCode = defaultLanguageCode\n      currentTranslationTable = defaultTranslationTable\n      return\n    }\n    try {\n      currentTranslationTable = (await sbp('backend/translations/get', language)) || defaultTranslationTable\n\n      // Only set `currentLanguage` if there was no error fetching the ressource.\n      currentLanguage = language\n      currentLanguageCode = languageCode\n    } catch (error) {\n      console.error(error)\n    }\n  }\n})\n\n/*\nExamples:\n\nSimple string:\n  i18n Hello world\n\nString with variables:\n  i18n(\n    :args='{ name: ourUsername }'\n  ) Hello {name}!\n\nString with HTML markup inside:\n  i18n(\n    :args='{ ...LTags(\"strong\", \"span\"), name: ourUsername }'\n  ) Hello {strong_}{name}{_strong}, today it's a {span_}nice day{_span}!\n  | or\n  i18n(\n    :args='{ ...LTags(\"span\"), name: \"<strong>${ourUsername}</strong>\" }'\n  ) Hello {name}, today it's a {span_}nice day{_span}!\n\nString with Vue components inside:\n  i18n(\n    compile\n    :args='{ r1: `<router-link class=\"link\" to=\"/login\">`, r2: \"</router-link>\"}'\n  ) Go to {r1}login{r2} page.\n\n## When to use LTags or write html as part of the key?\n- Use LTags when they wrap a variable and raw text. Example:\n\n  i18n(\n    :args='{ count: 5, ...LTags(\"strong\") }'\n  ) Invite {strong}{count} members{strong} to the party!\n\n- Write HTML when it wraps only the variable.\n-- That way translators don't need to worry about extra information.\n  i18n(\n    :args='{ count: \"<strong>5</strong>\" }'\n  ) Invite {count} members to the party!\n*/\n\nexport function LTags (...tags          )                  {\n  const o = {\n    'br_': '<br/>'\n  }\n  for (const tag of tags) {\n    o[`${tag}_`] = `<${tag}>`\n    o[`_${tag}`] = `</${tag}>`\n  }\n  return o\n}\n\nexport default function L (\n  key        ,\n  args                          \n)         {\n  return template(currentTranslationTable[key] || key, args)\n    // Avoid inopportune linebreaks before certain punctuations.\n    .replace(/\\s(?=[;:?!])/g, '&nbsp;')\n}\n\nexport function LError (error       )                       {\n  let url = `/app/dashboard?modal=UserSettingsModal&section=application-logs&errorMsg=${encodeURI(error.message)}`\n  if (!sbp('state/vuex/state').loggedIn) {\n    url = 'https://github.com/okTurtles/group-income/issues'\n  }\n  return {\n    reportError: L('\"{errorMsg}\". You can {a_}report the error{_a}.', {\n      errorMsg: error.message,\n      'a_': `<a class=\"link\" target=\"_blank\" href=\"${url}\">`,\n      '_a': '</a>'\n    })\n  }\n}\n\nfunction sanitize (inputString) {\n  return dompurify.sanitize(inputString, dompurifyConfig)\n}\n\nVue.component('i18n', {\n  functional: true,\n  props: {\n    args: [Object, Array],\n    tag: {\n      type: String,\n      default: 'span'\n    },\n    compile: Boolean\n  },\n  render: function (h, context) {\n    const text = context.children[0].text\n    const translation = L(text, context.props.args || {})\n    if (!translation) {\n      console.warn('The following i18n text was not translated correctly:', text)\n      return h(context.props.tag, context.data, text)\n    }\n    // Prevent reverse tabnabbing by including `rel=\"noopener noreferrer\"` when rendering as an outbound hyperlink.\n    if (context.props.tag === 'a' && context.data.attrs.target === '_blank') {\n      context.data.attrs.rel = 'noopener noreferrer'\n    }\n    if (context.props.compile) {\n      const result = Vue.compile('<wrap>' + sanitize(translation) + '</wrap>')\n      // console.log('TRANSLATED RENDERED TEXT:', context, result.render.toString())\n      return result.render.call({\n        _c: (tag, ...args) => {\n          if (tag === 'wrap') {\n            return h(context.props.tag, context.data, ...args)\n          } else {\n            return h(tag, ...args)\n          }\n        },\n        _v: x => x\n      })\n    } else {\n      if (!context.data.domProps) context.data.domProps = {}\n      context.data.domProps.innerHTML = sanitize(translation)\n      return h(context.props.tag, context.data)\n    }\n  }\n})\n", "const nargs = /\\{([0-9a-zA-Z_]+)\\}/g\n\nexport default function template (string        , ...args       )         {\n  const firstArg = args[0]\n  // If the first rest argument is a plain object or array, use it as replacement table.\n  // Otherwise, use the whole rest array as replacement table.\n  const replacementsByKey = (\n    (typeof firstArg === 'object' && firstArg !== null)\n      ? firstArg\n      : args\n  )\n\n  return string.replace(nargs, function replaceArg (match, capture, index) {\n    // Avoid replacing the capture if it is escaped by double curly braces.\n    if (string[index - 1] === '{' && string[index + match.length] === '}') {\n      return capture\n    }\n\n    const maybeReplacement = (\n      // Avoid accessing inherited properties of the replacement table.\n      // $FlowFixMe\n      Object.prototype.hasOwnProperty.call(replacementsByKey, capture)\n        ? replacementsByKey[capture]\n        : undefined\n    )\n\n    if (maybeReplacement === null || maybeReplacement === undefined) {\n      return ''\n    }\n    return String(maybeReplacement)\n  })\n}\n", "'use strict'\n\n// identity.js related\n\nexport const IDENTITY_PASSWORD_MIN_CHARS = 7\nexport const IDENTITY_USERNAME_MAX_CHARS = 80\n\n// group.js related\n\nexport const INVITE_INITIAL_CREATOR = 'invite-initial-creator'\nexport const INVITE_STATUS = {\n  REVOKED: 'revoked',\n  VALID: 'valid',\n  USED: 'used'\n}\nexport const PROFILE_STATUS = {\n  ACTIVE: 'active', // confirmed group join\n  PENDING: 'pending', // shortly after being approved to join the group\n  REMOVED: 'removed'\n}\n\nexport const PROPOSAL_RESULT = 'proposal-result'\nexport const PROPOSAL_INVITE_MEMBER = 'invite-member'\nexport const PROPOSAL_REMOVE_MEMBER = 'remove-member'\nexport const PROPOSAL_GROUP_SETTING_CHANGE = 'group-setting-change'\nexport const PROPOSAL_PROPOSAL_SETTING_CHANGE = 'proposal-setting-change'\nexport const PROPOSAL_GENERIC = 'generic'\n\nexport const PROPOSAL_ARCHIVED = 'proposal-archived'\nexport const MAX_ARCHIVED_PROPOSALS = 100\n\nexport const STATUS_OPEN = 'open'\nexport const STATUS_PASSED = 'passed'\nexport const STATUS_FAILED = 'failed'\nexport const STATUS_EXPIRED = 'expired'\nexport const STATUS_CANCELLED = 'cancelled'\n\n// chatroom.js related\n\nexport const CHATROOM_GENERAL_NAME = 'General'\nexport const CHATROOM_NAME_LIMITS_IN_CHARS = 50\nexport const CHATROOM_DESCRIPTION_LIMITS_IN_CHARS = 280\nexport const CHATROOM_ACTIONS_PER_PAGE = 40\nexport const CHATROOM_MESSAGES_PER_PAGE = 20\n\n// chatroom events\nexport const CHATROOM_MESSAGE_ACTION = 'chatroom-message-action'\nexport const CHATROOM_DETAILS_UPDATED = 'chatroom-details-updated'\nexport const MESSAGE_RECEIVE = 'message-receive'\nexport const MESSAGE_SEND = 'message-send'\n\nexport const CHATROOM_TYPES = {\n  INDIVIDUAL: 'individual',\n  GROUP: 'group'\n}\n\nexport const CHATROOM_PRIVACY_LEVEL = {\n  GROUP: 'chatroom-privacy-level-group',\n  PRIVATE: 'chatroom-privacy-level-private',\n  PUBLIC: 'chatroom-privacy-level-public'\n}\n\nexport const MESSAGE_TYPES = {\n  POLL: 'message-poll',\n  TEXT: 'message-text',\n  INTERACTIVE: 'message-interactive',\n  NOTIFICATION: 'message-notification'\n}\n\nexport const INVITE_EXPIRES_IN_DAYS = {\n  ON_BOARDING: 30,\n  PROPOSAL: 7\n}\n\nexport const MESSAGE_NOTIFICATIONS = {\n  ADD_MEMBER: 'add-member',\n  JOIN_MEMBER: 'join-member',\n  LEAVE_MEMBER: 'leave-member',\n  KICK_MEMBER: 'kick-member',\n  UPDATE_DESCRIPTION: 'update-description',\n  UPDATE_NAME: 'update-name',\n  DELETE_CHANNEL: 'delete-channel',\n  VOTE: 'vote'\n}\n\nexport const MESSAGE_VARIANTS = {\n  PENDING: 'pending',\n  SENT: 'sent',\n  RECEIVED: 'received',\n  FAILED: 'failed'\n}\n\n// mailbox.js related\n\nexport const MAIL_TYPE_MESSAGE = 'message'\nexport const MAIL_TYPE_FRIEND_REQ = 'friend-request'\n", "// to make rollup happy, I copied flowTyper-js\n// library into this file (it was refusing to\n// import because of the way functions were being\n// exported).\n//\n// GI EDIT NOTES:\n//\n// - The following functions can be used directly with 'validate'\n//   because they've had their '_scope' second parameter removed:\n//   - arrayOf\n//   - mapOf\n//   - object\n//   - objectOf\n//   - objectMaybeOf (this is a custom function that didn't exist in flowTyper)\n//\n// TODO: remove this file from eslintIgnore in package.json and fix errors\n\n                                             \n                                           \n                                                \n                                                      \n                                                       \n                                                            \n                                                 \n\n                                \n                   \n                  \n \n\n                                   \n                   \n                   \n                  \n \n\n                                      \n                   \n                   \n                   \n                   \n \n\n                                         \n                   \n                   \n                   \n                   \n                  \n \n\nexport const EMPTY_VALUE = Symbol('@@empty')\nexport const isEmpty = v => v === EMPTY_VALUE\nexport const isNil = v => v === null\nexport const isUndef = v => typeof v === 'undefined'\nexport const isBoolean = v => typeof v === 'boolean'\nexport const isNumber = v => typeof v === 'number'\nexport const isString = v => typeof v === 'string'\nexport const isObject = v => !isNil(v) && typeof v === 'object'\nexport const isFunction = v => typeof v === 'function'\n\nexport const isType = typeFn => (v, _scope = '') => {\n  try {\n    typeFn(v, _scope)\n    return true\n  } catch (_) {\n    return false\n  }\n}\n\n// This function will return value based on schema with inferred types. This\n// value can be used to define type in Flow with 'typeof' utility.\nexport const typeOf = schema => schema(EMPTY_VALUE, '')\nexport const getType = (typeFn, _options) => {\n  if (isFunction(typeFn.type)) return typeFn.type(_options)\n  return typeFn.name || '?'\n}\n\n// error\nexport class TypeValidatorError extends Error {\n  expectedType        \n  valueType        \n  value        \n  typeScope        \n  sourceFile        \n\n  constructor (\n    message         ,\n    expectedType        ,\n    valueType        ,\n    value        ,\n    typeName         = '',\n    typeScope          = ''\n  ) {\n    const errMessage = message ||\n      `invalid \"${valueType}\" value type; ${typeName || expectedType} type expected`\n    super(errMessage)\n    this.expectedType = expectedType\n    this.valueType = valueType\n    this.value = value\n    this.typeScope = typeScope || ''\n    this.sourceFile = this.getSourceFile()\n    this.message = `${errMessage}\\n${this.getErrorInfo()}`\n    this.name = this.constructor.name\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, TypeValidatorError)\n    }\n  }\n\n  getSourceFile ()         {\n    const fileNames = this.stack.match(/(\\/[\\w_\\-.]+)+(\\.\\w+:\\d+:\\d+)/g) || []\n    return fileNames.find(fileName => fileName.indexOf('/flowTyper-js/dist/') === -1) || ''\n  }\n\n  getErrorInfo ()         {\n    return `\n    file     ${this.sourceFile}\n    scope    ${this.typeScope}\n    expected ${this.expectedType.replace(/\\n/g, '')}\n    type     ${this.valueType}\n    value    ${this.value}\n`\n  }\n}\n\n// TypeValidatorError.prototype.name = 'TypeValidatorError'\n// exports.TypeValidatorError = TypeValidatorError\n\nconst validatorError =    (\n  typeFn                  ,\n  value       ,\n  scope         ,\n  message         ,\n  expectedType         ,\n  valueType         \n)                     => {\n  return new TypeValidatorError(\n    message,\n    expectedType || getType(typeFn),\n    valueType || typeof value,\n    JSON.stringify(value),\n    typeFn.name,\n    scope\n  )\n}\n\nexport const arrayOf =\n     (typeFn                  , _scope          = 'Array')                        => {\n    function array (value) {\n      if (isEmpty(value)) return [typeFn(value)]\n      if (Array.isArray(value)) {\n        let index = 0\n        return value.map(v => typeFn(v, `${_scope}[${index++}]`))\n      }\n      throw validatorError(array, value, _scope)\n    }\n    array.type = () => `Array<${getType(typeFn)}>`\n    return array\n  }\n\nexport const literalOf =\n                   (primitive   )                   => {\n    function literal (value, _scope = '') {\n      if (isEmpty(value) || (value === primitive)) return primitive\n      throw validatorError(literal, value, _scope)\n    }\n    literal.type = () => {\n      if (isBoolean(primitive)) return `${primitive ? 'true' : 'false'}`\n      else return `\"${primitive}\"`\n    }\n    return literal\n  }\n\nexport const mapOf =       (\n  keyTypeFn                  ,\n  typeFn                  \n)                            => {\n  function mapOf (value) {\n    if (isEmpty(value)) return {}\n    const o = object(value)\n    const reducer = (acc, key) =>\n      Object.assign(\n        acc,\n        {\n          // $FlowFixMe\n          [keyTypeFn(key, 'Map[_]')]: typeFn(o[key], `Map.${key}`)\n        }\n      )\n    return Object.keys(o).reduce(reducer, {})\n  }\n  mapOf.type = () => `{ [_:${getType(keyTypeFn)}]: ${getType(typeFn)} }`\n  return mapOf\n}\n\nconst isPrimitiveFn = (typeName) =>\n  ['undefined', 'null', 'boolean', 'number', 'string'].includes(typeName)\n\nexport const maybe =\n     (typeFn                  )                        => {\n    function maybe (value, _scope = '') {\n      return (isNil(value) || isUndef(value)) ? value : typeFn(value, _scope)\n    }\n    maybe.type = () => !isPrimitiveFn(typeFn.name) ? `?(${getType(typeFn)})` : `?${getType(typeFn)}`\n    return maybe\n  }\n\nexport const mixed = (\n  function mixed (value) {\n    return value\n  }                  \n)\n\nexport const object = (\n  function (value) {\n    if (isEmpty(value)) return {}\n    if (isObject(value) && !Array.isArray(value)) {\n      return Object.assign({}, value)\n    }\n    throw validatorError(object, value)\n  }                                    \n)\n\nexport const objectOf =                            \n  (typeObj   , _scope          = 'Object')                                                        => {\n  function object2 (value) {\n    const o = object(value)\n    const typeAttrs = Object.keys(typeObj)\n    const unknownAttr = Object.keys(o).find(attr => !typeAttrs.includes(attr))\n    if (unknownAttr) {\n      throw validatorError(\n        object2,\n        value,\n        _scope,\n        `missing object property '${unknownAttr}' in ${_scope} type`\n      )\n    }\n    // IMPORTANT: because esbuild can actually rename the functions in the compiled source\n    //            (e.g. from 'optional' to 'optional2'), we use .includes() instead of ===\n    //            to check the .name of a function\n    const undefAttr = typeAttrs.find(property => {\n      const propertyTypeFn = typeObj[property]\n      return (propertyTypeFn.name.includes('maybe') && !o.hasOwnProperty(property))\n    })\n    if (undefAttr) {\n      throw validatorError(\n        object2,\n        o[undefAttr],\n        `${_scope}.${undefAttr}`,\n        `empty object property '${undefAttr}' for ${_scope} type`,\n        `void | null | ${getType(typeObj[undefAttr]).substr(1)}`,\n        '-'\n      )\n    }\n\n    const reducer = isEmpty(value)\n      ? (acc, key) => Object.assign(acc, { [key]: typeObj[key](value) })\n      : (acc, key) => {\n        const typeFn = typeObj[key]\n        if (typeFn.name.includes('optional') && !o.hasOwnProperty(key)) {\n          return Object.assign(acc, {})\n        } else {\n          return Object.assign(acc, { [key]: typeFn(o[key], `${_scope}.${key}`) })\n        }\n      }\n    return typeAttrs.reduce(reducer, {})\n  }\n  object2.type = () => {\n    const props = Object.keys(typeObj).map(\n      (key) => {\n        const ret = typeObj[key].name.includes('optional')\n        ? `${key}?: ${getType(typeObj[key], { noVoid: true })}`\n        : `${key}: ${getType(typeObj[key])}`\n        return ret\n      }\n    )\n    return `{|\\n ${props.join(',\\n  ')} \\n|}`\n  }\n  return object2\n}\n\n// TODO: add flow type annotations and make it use validatorError etc.\nexport function objectMaybeOf (validations        , _scope          = 'Object')         {\n  return function (data     ) {\n    object(data)\n    for (const key in data) {\n      validations[key]?.(data[key], `${_scope}.${key}`)\n    }\n    return data\n  }\n}\n\nexport const optional =\n     (typeFn                  )                          => {\n    const unionFn = unionOf(typeFn, undef)\n    function optional (v) {\n      return unionFn(v)\n    }\n    optional.type = ({ noVoid }) => !noVoid ? getType(unionFn) : getType(typeFn)\n    return optional\n  }\n\nexport const nil = (\n  function nil (value) {\n    if (isEmpty(value) || isNil(value)) return null\n    throw validatorError(nil, value)\n  }\n                       \n)\n\nexport function undef (value, _scope = '') {\n  if (isEmpty(value) || isUndef(value)) return undefined\n  throw validatorError(undef, value, _scope)\n}\nundef.type = () => 'void'\n// export const undef = (undef: TypeValidator<void>)\n\nexport const boolean = (\n  function boolean (value, _scope = '') {\n    if (isEmpty(value)) return false\n    if (isBoolean(value)) return value\n    throw validatorError(boolean, value, _scope)\n  }\n                          \n)\n\nexport const number = (\n  function number (value, _scope = '') {\n    if (isEmpty(value)) return 0\n    if (isNumber(value)) return value\n    throw validatorError(number, value, _scope)\n  }\n                         \n)\n\nexport const string = (\n  function string (value, _scope = '') {\n    if (isEmpty(value)) return ''\n    if (isString(value)) return value\n    throw validatorError(string, value, _scope)\n  }\n                         \n)\n\n                            \n             \n                                     \n                                                 \n                                                             \n                                                                         \n                                                                                     \n                                                                                                 \n                                                                                                             \n                                                                                                                         \n                                                                                                                                     \n                                                                                                                                                 \n\nfunction tupleOf_ (...typeFuncs) {\n  function tuple (value       , _scope = '') {\n    const cardinality = typeFuncs.length\n    if (isEmpty(value)) return typeFuncs.map(fn => fn(value))\n    if (Array.isArray(value) && value.length === cardinality) {\n      const tupleValue = []\n      for (let i = 0; i < cardinality; i += 1) {\n        tupleValue.push(typeFuncs[i](value[i], _scope))\n      }\n      return tupleValue\n    }\n    throw validatorError(tuple, value, _scope)\n  }\n  tuple.type = () => `[${typeFuncs.map(fn => getType(fn)).join(', ')}]`\n  return tuple\n}\n\n// $FlowFixMe - $Tuple<(A, B, C, ...)[]>\n// const tupleOf: TupleT = tupleOf_\nexport const tupleOf = tupleOf_\n\n             \n                                   \n                                                \n                                                             \n                                                                          \n                                                                                       \n                                                                                                    \n                                                                                                                 \n                                                                                                                              \n                                                                                                                                           \n                                                                                                                                                        \n\nfunction unionOf_ (...typeFuncs) {\n  function union (value       , _scope = '') {\n    for (const typeFn of typeFuncs) {\n      try {\n        return typeFn(value, _scope)\n      } catch (_) {}\n    }\n    throw validatorError(union, value, _scope)\n  }\n  union.type = () => `(${typeFuncs.map(fn => getType(fn)).join(' | ')})`\n  return union\n}\n// $FlowFixMe\n// const unionOf: UnionT = (unionOf_)\nexport const unionOf = unionOf_", "'use strict'\n\nimport {\n  objectOf, objectMaybeOf, arrayOf, unionOf,\n  string, number, optional, mapOf, literalOf\n} from '~/frontend/model/contracts/misc/flowTyper.js'\nimport {\n  CHATROOM_TYPES, CHATROOM_PRIVACY_LEVEL,\n  MESSAGE_TYPES, MESSAGE_NOTIFICATIONS,\n  MAIL_TYPE_MESSAGE, MAIL_TYPE_FRIEND_REQ\n} from './constants.js'\n\n// group.js related\n\nexport const inviteType      = objectOf({\n  inviteSecret: string,\n  quantity: number,\n  creator: string,\n  invitee: optional(string),\n  status: string,\n  responses: mapOf(string, string),\n  expires: number\n})\n\n// chatroom.js related\n\nexport const chatRoomAttributesType      = objectOf({\n  name: string,\n  description: string,\n  type: unionOf(...Object.values(CHATROOM_TYPES).map(v => literalOf(v))),\n  privacyLevel: unionOf(...Object.values(CHATROOM_PRIVACY_LEVEL).map(v => literalOf(v)))\n})\n\nexport const messageType      = objectMaybeOf({\n  type: unionOf(...Object.values(MESSAGE_TYPES).map(v => literalOf(v))),\n  text: string, // message text | proposalId when type is INTERACTIVE | notificationType when type if NOTIFICATION\n  notification: objectMaybeOf({\n    type: unionOf(...Object.values(MESSAGE_NOTIFICATIONS).map(v => literalOf(v))),\n    params: mapOf(string, string) // { username }\n  }),\n  replyingMessage: objectOf({\n    id: string, // scroll to the original message and highlight\n    text: string // display text(if too long, truncate)\n  }),\n  emoticons: mapOf(string, arrayOf(string)), // mapping of emoticons and usernames\n  onlyVisibleTo: arrayOf(string) // list of usernames, only necessary when type is NOTIFICATION\n  // TODO: need to consider POLL and add more down here\n})\n\n// mailbox.js related\n\nexport const mailType      = unionOf(...[MAIL_TYPE_MESSAGE, MAIL_TYPE_FRIEND_REQ].map(k => literalOf(k)))\n", "'use strict'\n\nimport { L } from '@common/common.js'\n\nexport const MINS_MILLIS = 60000\nexport const HOURS_MILLIS = 60 * MINS_MILLIS\nexport const DAYS_MILLIS = 24 * HOURS_MILLIS\nexport const MONTHS_MILLIS = 30 * DAYS_MILLIS\n\nexport function addMonthsToDate (date        , months        )       {\n  const now = new Date(date)\n  return new Date(now.setMonth(now.getMonth() + months))\n}\n\n// It might be tempting to deal directly with Dates and ISOStrings, since that's basically\n// what a period stamp is at the moment, but keeping this abstraction allows us to change\n// our mind in the future simply by editing these two functions.\n// TODO: We may want to, for example, get the time from the server instead of relying on\n// the client in case the client's clock isn't set correctly.\n// See: https://github.com/okTurtles/group-income/issues/531\nexport function dateToPeriodStamp (date               )         {\n  return new Date(date).toISOString()\n}\n\nexport function dateFromPeriodStamp (daystamp        )       {\n  return new Date(daystamp)\n}\n\nexport function periodStampGivenDate ({ recentDate, periodStart, periodLength }   \n                                                               \n )         {\n  const periodStartDate = dateFromPeriodStamp(periodStart)\n  let nextPeriod = addTimeToDate(periodStartDate, periodLength)\n  const curDate = new Date(recentDate)\n  let curPeriod\n  if (curDate < nextPeriod) {\n    if (curDate >= periodStartDate) {\n      return periodStart // we're still in the same period\n    } else {\n      // we're in a period before the current one\n      curPeriod = periodStartDate\n      do {\n        curPeriod = addTimeToDate(curPeriod, -periodLength)\n      } while (curDate < curPeriod)\n    }\n  } else {\n    // we're at least a period ahead of periodStart\n    do {\n      curPeriod = nextPeriod\n      nextPeriod = addTimeToDate(nextPeriod, periodLength)\n    } while (curDate >= nextPeriod)\n  }\n  return dateToPeriodStamp(curPeriod)\n}\n\nexport function dateIsWithinPeriod ({ date, periodStart, periodLength }   \n                                                         \n )          {\n  const dateObj = new Date(date)\n  const start = dateFromPeriodStamp(periodStart)\n  return dateObj > start && dateObj < addTimeToDate(start, periodLength)\n}\n\nexport function addTimeToDate (date               , timeMillis        )       {\n  const d = new Date(date)\n  d.setTime(d.getTime() + timeMillis)\n  return d\n}\n\nexport function dateToMonthstamp (date               )         {\n  // we could use Intl.DateTimeFormat but that doesn't support .format() on Android\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat/format\n  return new Date(date).toISOString().slice(0, 7)\n}\n\nexport function dateFromMonthstamp (monthstamp        )       {\n  // this is a hack to prevent new Date('2020-01').getFullYear() => 2019\n  return new Date(`${monthstamp}-01T00:01:00.000Z`) // the Z is important\n}\n\n// TODO: to prevent conflicts among user timezones, we need\n//       to use the server's time, and not our time here.\n//       https://github.com/okTurtles/group-income/issues/531\nexport function currentMonthstamp ()         {\n  return dateToMonthstamp(new Date())\n}\n\nexport function prevMonthstamp (monthstamp        )         {\n  const date = dateFromMonthstamp(monthstamp)\n  date.setMonth(date.getMonth() - 1)\n  return dateToMonthstamp(date)\n}\n\nexport function comparePeriodStamps (periodA        , periodB        )         {\n  return dateFromPeriodStamp(periodA).getTime() - dateFromPeriodStamp(periodB).getTime()\n}\n\nexport function compareMonthstamps (monthstampA        , monthstampB        )         {\n  return dateFromMonthstamp(monthstampA).getTime() - dateFromMonthstamp(monthstampB).getTime()\n  // const A = dateA.getMonth() + dateA.getFullYear() * 12\n  // const B = dateB.getMonth() + dateB.getFullYear() * 12\n  // return A - B\n}\n\nexport function compareISOTimestamps (a        , b        )         {\n  return new Date(a).getTime() - new Date(b).getTime()\n}\n\nexport function lastDayOfMonth (date      )       {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 0)\n}\n\nexport function firstDayOfMonth (date      )       {\n  return new Date(date.getFullYear(), date.getMonth(), 1)\n}\n\nexport function humanDate (\n  date                        ,\n  options                              = { month: 'short', day: 'numeric' }\n)         {\n  const locale = typeof navigator === 'undefined'\n    // Fallback for Mocha tests.\n    ? 'en-US'\n    // Flow considers `navigator.languages` to be of type `$ReadOnlyArray<string>`,\n    // which is not compatible with the `string[]` expected by `.toLocaleDateString()`.\n    // Casting to `string[]` through `any` as a workaround.\n    : ((navigator.languages     )          ) ?? navigator.language\n  // NOTE: `.toLocaleDateString()` automatically takes local timezone differences into account.\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleDateString\n  return new Date(date).toLocaleDateString(locale, options)\n}\n\nexport function isPeriodStamp (arg        )          {\n  return /\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}.\\d{3}Z/.test(arg)\n}\n\nexport function isFullMonthstamp (arg        )          {\n  return /^\\d{4}-(0[1-9]|1[0-2])$/.test(arg)\n}\n\nexport function isMonthstamp (arg        )          {\n  return isShortMonthstamp(arg) || isFullMonthstamp(arg)\n}\n\nexport function isShortMonthstamp (arg        )          {\n  return /^(0[1-9]|1[0-2])$/.test(arg)\n}\n\nexport function monthName (monthstamp        )         {\n  return humanDate(dateFromMonthstamp(monthstamp), { month: 'long' })\n}\n\nexport function proximityDate (date      )         {\n  date = new Date(date)\n  const today = new Date()\n  const yesterday = (d => new Date(d.setDate(d.getDate() - 1)))(new Date())\n  const lastWeek = (d => new Date(d.setDate(d.getDate() - 7)))(new Date())\n\n  for (const toReset of [date, today, yesterday, lastWeek]) {\n    toReset.setHours(0)\n    toReset.setMinutes(0)\n    toReset.setSeconds(0, 0)\n  }\n\n  const datems = Number(date)\n  let pd = date > lastWeek ? humanDate(datems, { month: 'short', day: 'numeric', year: 'numeric' }) : humanDate(datems)\n  if (date.getTime() === yesterday.getTime()) pd = L('Yesterday')\n  if (date.getTime() === today.getTime()) pd = L('Today')\n\n  return pd\n}\n\nexport function timeSince (datems        , dateNow         = Date.now())         {\n  const interval = dateNow - datems\n\n  if (interval >= DAYS_MILLIS * 2) {\n    // Make sure to replace any ordinary space character by a non-breaking one.\n    return humanDate(datems).replace(/\\x32/g, '\\xa0')\n  }\n  if (interval >= DAYS_MILLIS) {\n    return L('1d')\n  }\n  if (interval >= HOURS_MILLIS) {\n    return L('{hours}h', { hours: Math.floor(interval / HOURS_MILLIS) })\n  }\n  if (interval >= MINS_MILLIS) {\n    // Maybe use 'min' symbol rather than 'm'?\n    return L('{minutes}m', { minutes: Math.max(1, Math.floor(interval / MINS_MILLIS)) })\n  }\n  return L('<1m')\n}\n\nexport function cycleAtDate (atDate               )         {\n  const now = new Date(atDate) // Just in case the parameter is a string type.\n  const partialCycles = now.getDate() / lastDayOfMonth(now).getDate()\n  return partialCycles\n}\n", "'use strict'\n\nexport function logExceptNavigationDuplicated (err        ) {\n  err.name !== 'NavigationDuplicated' && console.error(err)\n}\n", "'use strict'\n\nimport sbp from '@sbp/sbp'\nimport { INVITE_STATUS, MESSAGE_TYPES } from './constants.js'\nimport { DAYS_MILLIS } from './time.js'\nimport { logExceptNavigationDuplicated } from '~/frontend/views/utils/misc.js'\n\n// !!!!!!!!!!!!!!!\n// !! IMPORTANT !!\n// !!!!!!!!!!!!!!!\n//\n// DO NOT CHANGE THE LOGIC TO ANY OF THESE FUNCTIONS!\n// INSTEAD, CREATE NEW FUNCTIONS WITH DIFFERENT NAMES\n// AND USE THOSE INSTEAD!\n//\n// THIS IS A CONSEQUENCE OF SHARING THIS CODE WITH THE REST OF THE APP.\n// IF YOU DO NOT NEED TO SHARE CODE WITH THE REST OF THE APP (AND CAN\n// KEEP IT WITHIN THE CONTRACT ONLY), THEN YOU DON'T NEED TO WORRY ABOUT\n// THIS, AND SHOULD INCLUDE THOSE FUNCTIONS (WITHOUT EXPORTING THEM),\n// DIRECTLY IN YOUR CONTRACT DEFINITION FILE. THEN YOU CAN MODIFY\n// THEM AS MUCH AS YOU LIKE (and generate new contract versions out of them).\n\n// group.js related\n\nexport function createInvite ({ quantity = 1, creator, expires, invitee }   \n                                                                      \n )    \n                  \n                  \n                       \n                         \n                   \n                   \n                 \n   {\n  return {\n    inviteSecret: `${parseInt(Math.random() * 10000)}`, // TODO: this\n    quantity,\n    creator,\n    invitee,\n    status: INVITE_STATUS.VALID,\n    responses: {}, // { bob: true } list of usernames that accepted the invite.\n    expires: Date.now() + DAYS_MILLIS * expires\n  }\n}\n\n// chatroom.js related\n\nexport function createMessage ({ meta, data, hash, state }   \n                                                          \n )         {\n  const { type, text, replyingMessage } = data\n  const { createdDate } = meta\n\n  let newMessage = {\n    type,\n    datetime: new Date(createdDate).toISOString(),\n    id: hash,\n    from: meta.username\n  }\n\n  if (type === MESSAGE_TYPES.TEXT) {\n    newMessage = !replyingMessage ? { ...newMessage, text } : { ...newMessage, text, replyingMessage }\n  } else if (type === MESSAGE_TYPES.POLL) {\n    // TODO: Poll message creation\n  } else if (type === MESSAGE_TYPES.NOTIFICATION) {\n    const params = {\n      channelName: state?.attributes.name,\n      channelDescription: state?.attributes.description,\n      ...data.notification\n    }\n    delete params.type\n    newMessage = {\n      ...newMessage,\n      notification: { type: data.notification.type, params }\n    }\n  } else if (type === MESSAGE_TYPES.INTERACTIVE) {\n    // TODO: Interactive message creation for proposals\n  }\n  return newMessage\n}\n\nexport async function leaveChatRoom ({ contractID }   \n                    \n ) {\n  const rootState = sbp('state/vuex/state')\n  const rootGetters = sbp('state/vuex/getters')\n  if (contractID === rootGetters.currentChatRoomId) {\n    sbp('state/vuex/commit', 'setCurrentChatRoomId', {\n      groupId: rootState.currentGroupId\n    })\n    const curRouteName = sbp('controller/router').history.current.name\n    if (curRouteName === 'GroupChat' || curRouteName === 'GroupChatConversation') {\n      await sbp('controller/router')\n        .push({ name: 'GroupChatConversation', params: { chatRoomId: rootGetters.currentChatRoomId } })\n        .catch(logExceptNavigationDuplicated)\n    }\n  }\n\n  sbp('state/vuex/commit', 'deleteChatRoomUnread', { chatRoomId: contractID })\n  sbp('state/vuex/commit', 'deleteChatRoomScrollPosition', { chatRoomId: contractID })\n\n  // NOTE: make sure *not* to await on this, since that can cause\n  //       a potential deadlock. See same warning in sideEffect for\n  //       'gi.contracts/group/removeMember'\n  sbp('chelonia/contract/remove', contractID).catch(e => {\n    console.error(`leaveChatRoom(${contractID}): remove threw ${e.name}:`, e)\n  })\n}\n\nexport function findMessageIdx (id        , messages               )         {\n  for (let i = messages.length - 1; i >= 0; i--) {\n    if (messages[i].id === id) {\n      return i\n    }\n  }\n  return -1\n}\n\nexport function makeMentionFromUsername (username        )   \n                         \n  {\n  return {\n    me: `@${username}`,\n    all: '@all'\n  }\n}\n", "'use strict'\nimport sbp from '@sbp/sbp'\n\n// NOTE: since these functions don't modify contract state, it should\n//       be safe to modify them without worrying about version conflicts.\n\nexport async function requestNotificationPermission (force          = false)                         {\n  if (typeof Notification === 'undefined') {\n    return null\n  }\n  if (force || Notification.permission === 'default') {\n    try {\n      sbp('state/vuex/commit', 'setNotificationEnabled', await Notification.requestPermission() === 'granted')\n    } catch (e) {\n      console.error('requestNotificationPermission:', e.message)\n      return null\n    }\n  }\n  return Notification.permission\n}\n\nexport function makeNotification ({ title, body, icon, path }   \n                                                           \n )       {\n  const notificationEnabled = sbp('state/vuex/state').notificationEnabled\n  if (typeof Notification === 'undefined' || Notification.permission !== 'granted' || !notificationEnabled) {\n    return\n  }\n\n  const notification = new Notification(title, { body, icon })\n  if (path) {\n    notification.onclick = function (event) {\n      event.preventDefault()\n      sbp('controller/router').push({ path }).catch(console.warn)\n    }\n  }\n}\n", "'use strict'\n\nimport sbp from '@sbp/sbp'\nimport { Vue, L } from '@common/common.js'\nimport { merge, cloneDeep } from './shared/giLodash.js'\nimport {\n  CHATROOM_NAME_LIMITS_IN_CHARS,\n  CHATROOM_DESCRIPTION_LIMITS_IN_CHARS,\n  CHATROOM_ACTIONS_PER_PAGE,\n  CHATROOM_MESSAGES_PER_PAGE,\n  MESSAGE_TYPES,\n  MESSAGE_NOTIFICATIONS,\n  CHATROOM_MESSAGE_ACTION,\n  MESSAGE_RECEIVE\n} from './shared/constants.js'\nimport { chatRoomAttributesType, messageType } from './shared/types.js'\nimport { createMessage, leaveChatRoom, findMessageIdx, makeMentionFromUsername } from './shared/functions.js'\nimport { makeNotification } from './shared/nativeNotification.js'\nimport { objectOf, string, optional } from '~/frontend/model/contracts/misc/flowTyper.js'\n\nfunction createNotificationData (\n  notificationType        ,\n  moreParams         = {}\n)         {\n  return {\n    type: MESSAGE_TYPES.NOTIFICATION,\n    notification: {\n      type: notificationType,\n      ...moreParams\n    }\n  }\n}\n\nfunction emitMessageEvent ({ contractID, hash }   \n                     \n              \n )       {\n  sbp('okTurtles.events/emit', `${CHATROOM_MESSAGE_ACTION}-${contractID}`, { hash })\n}\n\nfunction addMention ({ contractID, messageId, datetime, text, username, chatRoomName }   \n                     \n                    \n                   \n               \n                   \n                      \n )       {\n  /**\n   * If 'READY_TO_JOIN_CHATROOM' is false, it means not syncing chatroom\n  */\n  if (sbp('okTurtles.data/get', 'READY_TO_JOIN_CHATROOM')) {\n    return\n  }\n\n  sbp('state/vuex/commit', 'addChatRoomUnreadMention', {\n    chatRoomId: contractID,\n    messageId,\n    createdDate: datetime\n  })\n\n  const rootGetters = sbp('state/vuex/getters')\n  const groupID = rootGetters.groupIdFromChatRoomId(contractID)\n  const path = `/group-chat/${contractID}`\n\n  makeNotification({\n    title: `# ${chatRoomName}`,\n    body: text,\n    icon: rootGetters.globalProfile2(groupID, username)?.picture,\n    path\n  })\n\n  sbp('okTurtles.events/emit', MESSAGE_RECEIVE)\n}\n\nfunction deleteMention ({ contractID, messageId }   \n                                       \n )       {\n  sbp('state/vuex/commit', 'deleteChatRoomUnreadMention', { chatRoomId: contractID, messageId })\n}\n\nfunction updateUnreadPosition ({ contractID, hash, createdDate }   \n                                                       \n )       {\n  sbp('state/vuex/commit', 'setChatRoomUnreadSince', {\n    chatRoomId: contractID,\n    messageId: hash,\n    createdDate\n  })\n}\n\nsbp('chelonia/defineContract', {\n  name: 'gi.contracts/chatroom',\n  metadata: {\n    validate: objectOf({\n      createdDate: string, // action created date\n      username: string, // action creator\n      identityContractID: string // action creator identityContractID\n    }),\n    create () {\n      const { username, identityContractID } = sbp('state/vuex/state').loggedIn\n      return {\n        createdDate: new Date().toISOString(),\n        username,\n        identityContractID\n      }\n    }\n  },\n  getters: {\n    currentChatRoomState (state) {\n      return state\n    },\n    chatRoomSettings (state, getters) {\n      return getters.currentChatRoomState.settings || {}\n    },\n    chatRoomAttributes (state, getters) {\n      return getters.currentChatRoomState.attributes || {}\n    },\n    chatRoomUsers (state, getters) {\n      return getters.currentChatRoomState.users || {}\n    },\n    chatRoomLatestMessages (state, getters) {\n      return getters.currentChatRoomState.messages || []\n    }\n  },\n  actions: {\n    // This is the constructor of Chat contract\n    'gi.contracts/chatroom': {\n      validate: objectOf({\n        attributes: chatRoomAttributesType\n      }),\n      process ({ meta, data }, { state }) {\n        const initialState = merge({\n          settings: {\n            actionsPerPage: CHATROOM_ACTIONS_PER_PAGE,\n            messagesPerPage: CHATROOM_MESSAGES_PER_PAGE,\n            maxNameLength: CHATROOM_NAME_LIMITS_IN_CHARS,\n            maxDescriptionLength: CHATROOM_DESCRIPTION_LIMITS_IN_CHARS\n          },\n          attributes: {\n            creator: meta.username,\n            deletedDate: null,\n            archivedDate: null\n          },\n          users: {},\n          messages: []\n        }, data)\n        for (const key in initialState) {\n          Vue.set(state, key, initialState[key])\n        }\n      }\n    },\n    'gi.contracts/chatroom/join': {\n      validate: objectOf({\n        username: string // username of joining member\n      }),\n      process ({ data, meta, hash }, { state }) {\n        const { username } = data\n        if (!state.saveMessage && state.users[username]) {\n          // this can happen when we're logging in on another machine, and also in other circumstances\n          console.warn('Can not join the chatroom which you are already part of')\n          return\n        }\n\n        Vue.set(state.users, username, { joinedDate: meta.createdDate })\n\n        if (!state.saveMessage) {\n          return\n        }\n\n        const notificationType = username === meta.username ? MESSAGE_NOTIFICATIONS.JOIN_MEMBER : MESSAGE_NOTIFICATIONS.ADD_MEMBER\n        const notificationData = createNotificationData(\n          notificationType,\n          notificationType === MESSAGE_NOTIFICATIONS.ADD_MEMBER ? { username } : {}\n        )\n        const newMessage = createMessage({ meta, hash, data: notificationData, state })\n        state.messages.push(newMessage)\n      },\n      sideEffect ({ contractID, hash, meta }) {\n        emitMessageEvent({ contractID, hash })\n\n        if (sbp('okTurtles.data/get', 'READY_TO_JOIN_CHATROOM') || // Join by himself or Login in another device\n          sbp('okTurtles.data/get', 'JOINING_CHATROOM_ID') === contractID) { // Be added by another\n          updateUnreadPosition({ contractID, hash, createdDate: meta.createdDate })\n        }\n      }\n    },\n    'gi.contracts/chatroom/rename': {\n      validate: objectOf({\n        name: string\n      }),\n      process ({ data, meta, hash }, { state }) {\n        Vue.set(state.attributes, 'name', data.name)\n\n        if (!state.saveMessage) {\n          return\n        }\n\n        const notificationData = createNotificationData(MESSAGE_NOTIFICATIONS.UPDATE_NAME, {})\n        const newMessage = createMessage({ meta, hash, data: notificationData, state })\n        state.messages.push(newMessage)\n      },\n      sideEffect ({ contractID, hash, meta }) {\n        emitMessageEvent({ contractID, hash })\n\n        if (sbp('okTurtles.data/get', 'READY_TO_JOIN_CHATROOM')) {\n          updateUnreadPosition({ contractID, hash, createdDate: meta.createdDate })\n        }\n      }\n    },\n    'gi.contracts/chatroom/changeDescription': {\n      validate: objectOf({\n        description: string\n      }),\n      process ({ data, meta, hash }, { state }) {\n        Vue.set(state.attributes, 'description', data.description)\n\n        if (!state.saveMessage) {\n          return\n        }\n\n        const notificationData = createNotificationData(\n          MESSAGE_NOTIFICATIONS.UPDATE_DESCRIPTION, {}\n        )\n        const newMessage = createMessage({ meta, hash, data: notificationData, state })\n        state.messages.push(newMessage)\n      },\n      sideEffect ({ contractID, hash, meta }) {\n        emitMessageEvent({ contractID, hash })\n\n        if (sbp('okTurtles.data/get', 'READY_TO_JOIN_CHATROOM')) {\n          updateUnreadPosition({ contractID, hash, createdDate: meta.createdDate })\n        }\n      }\n    },\n    'gi.contracts/chatroom/leave': {\n      validate: objectOf({\n        username: optional(string), // coming from the gi.contracts/group/leaveChatRoom\n        member: string // username to be removed\n      }),\n      process ({ data, meta, hash }, { state }) {\n        const { member } = data\n        const isKicked = data.username && member !== data.username\n        if (!state.saveMessage && !state.users[member]) {\n          throw new Error(`Can not leave the chatroom which ${member} are not part of`)\n        }\n        Vue.delete(state.users, member)\n\n        if (!state.saveMessage) {\n          return\n        }\n\n        const notificationType = !isKicked ? MESSAGE_NOTIFICATIONS.LEAVE_MEMBER : MESSAGE_NOTIFICATIONS.KICK_MEMBER\n        const notificationData = createNotificationData(notificationType, isKicked ? { username: member } : {})\n        const newMessage = createMessage({\n          meta: isKicked ? meta : { ...meta, username: member },\n          hash,\n          data: notificationData,\n          state\n        })\n        state.messages.push(newMessage)\n      },\n      sideEffect ({ data, hash, contractID, meta }, { state }) {\n        const rootState = sbp('state/vuex/state')\n        if (data.member === rootState.loggedIn.username) {\n          if (sbp('okTurtles.data/get', 'READY_TO_JOIN_CHATROOM')) {\n            updateUnreadPosition({ contractID, hash, createdDate: meta.createdDate })\n          }\n          if (sbp('okTurtles.data/get', 'JOINING_CHATROOM_ID')) {\n            return\n          }\n          leaveChatRoom({ contractID })\n        }\n        emitMessageEvent({ contractID, hash })\n      }\n    },\n    'gi.contracts/chatroom/delete': {\n      validate: (data, { state, meta }) => {\n        if (state.attributes.creator !== meta.username) {\n          throw new TypeError(L('Only the channel creator can delete channel.'))\n        }\n      },\n      process ({ data, meta }, { state, rootState }) {\n        Vue.set(state.attributes, 'deletedDate', meta.createdDate)\n        for (const username in state.users) {\n          Vue.delete(state.users, username)\n        }\n      },\n      sideEffect ({ meta, contractID }, { state }) {\n        if (sbp('okTurtles.data/get', 'JOINING_CHATROOM_ID')) {\n          return\n        }\n        leaveChatRoom({ contractID })\n      }\n    },\n    'gi.contracts/chatroom/addMessage': {\n      validate: messageType,\n      process ({ data, meta, hash }, { state }) {\n        if (!state.saveMessage) {\n          return\n        }\n        const pendingMsg = state.messages.find(msg => msg.id === hash && msg.pending)\n        if (pendingMsg) {\n          delete pendingMsg.pending\n        } else {\n          state.messages.push(createMessage({ meta, data, hash, state }))\n        }\n      },\n      sideEffect ({ contractID, hash, meta, data }, { state, getters }) {\n        emitMessageEvent({ contractID, hash })\n\n        const rootState = sbp('state/vuex/state')\n        const me = rootState.loggedIn.username\n\n        if (me === meta.username) {\n          return\n        }\n        const newMessage = createMessage({ meta, data, hash, state })\n        const mentions = makeMentionFromUsername(me)\n        if (data.type === MESSAGE_TYPES.TEXT &&\n          (newMessage.text.includes(mentions.me) || newMessage.text.includes(mentions.all))) {\n          addMention({\n            contractID,\n            messageId: newMessage.id,\n            datetime: newMessage.datetime,\n            text: newMessage.text,\n            username: meta.username,\n            chatRoomName: getters.chatRoomAttributes.name\n          })\n        }\n\n        if (sbp('okTurtles.data/get', 'READY_TO_JOIN_CHATROOM')) {\n          updateUnreadPosition({ contractID, hash, createdDate: meta.createdDate })\n        }\n      }\n    },\n    'gi.contracts/chatroom/editMessage': {\n      validate: (data, { state, meta }) => {\n        objectOf({\n          id: string,\n          createdDate: string,\n          text: string\n        })(data)\n        // TODO: Actually NOT SURE it's needed to check if the meta.username === message.from\n        // there is no messagess in vuex state\n        // to check if the meta.username is creator seems like too heavy\n      },\n      process ({ data, meta }, { state }) {\n        if (!state.saveMessage) {\n          return\n        }\n        const msgIndex = findMessageIdx(data.id, state.messages)\n        if (msgIndex >= 0 && meta.username === state.messages[msgIndex].from) {\n          state.messages[msgIndex].text = data.text\n          state.messages[msgIndex].updatedDate = meta.createdDate\n          if (state.saveMessage && state.messages[msgIndex].pending) {\n            delete state.messages[msgIndex].pending\n          }\n        }\n      },\n      sideEffect ({ contractID, hash, meta, data }, { getters }) {\n        emitMessageEvent({ contractID, hash })\n\n        const rootState = sbp('state/vuex/state')\n        const me = rootState.loggedIn.username\n\n        if (me === meta.username) {\n          return\n        }\n        const isAlreadyAdded = rootState.chatRoomUnread[contractID].mentions.find(m => m.messageId === data.id)\n        const mentions = makeMentionFromUsername(me)\n        const isIncludeMention = data.text.includes(mentions.me) || data.text.includes(mentions.all)\n        if (!isAlreadyAdded && isIncludeMention) {\n          addMention({\n            contractID,\n            messageId: data.id,\n            /*\n            * the following datetime is the time when the message(which made mention) is created\n            * the reason why it is it instead of datetime when the mention created is because\n            * it is compared to the datetime of other messages when user scrolls\n            * to decide if it should be removed from the list of mentions or not\n            */\n            datetime: data.createdDate,\n            text: data.text,\n            username: meta.username,\n            chatRoomName: getters.chatRoomAttributes.name\n          })\n        } else if (isAlreadyAdded && !isIncludeMention) {\n          deleteMention({ contractID, messageId: data.id })\n        }\n      }\n    },\n    'gi.contracts/chatroom/deleteMessage': {\n      validate: objectOf({\n        id: string\n      }),\n      process ({ data, meta }, { state }) {\n        if (!state.saveMessage) {\n          return\n        }\n        const msgIndex = findMessageIdx(data.id, state.messages)\n        if (msgIndex >= 0) {\n          state.messages.splice(msgIndex, 1)\n        }\n        // filter replied messages and check if the current message is original\n        for (const message of state.messages) {\n          if (message.replyingMessage?.id === data.id) {\n            message.replyingMessage.id = null\n            message.replyingMessage.text = L('Original message was removed by {username}', {\n              username: makeMentionFromUsername(meta.username).me\n            })\n          }\n        }\n      },\n      sideEffect ({ data, contractID, hash, meta }) {\n        emitMessageEvent({ contractID, hash })\n\n        const rootState = sbp('state/vuex/state')\n        const me = rootState.loggedIn.username\n\n        if (rootState.chatRoomScrollPosition[contractID] === data.id) {\n          sbp('state/vuex/commit', 'setChatRoomScrollPosition', {\n            chatRoomId: contractID, messageId: null\n          })\n        }\n\n        if (rootState.chatRoomUnread[contractID].since.messageId === data.id) {\n          sbp('state/vuex/commit', 'deleteChatRoomUnreadSince', {\n            chatRoomId: contractID,\n            deletedDate: meta.createdDate\n          })\n        }\n\n        if (me === meta.username) {\n          return\n        }\n        if (rootState.chatRoomUnread[contractID].mentions.find(m => m.messageId === data.id)) {\n          deleteMention({ contractID, messageId: data.id })\n        }\n\n        emitMessageEvent({ contractID, hash })\n      }\n    },\n    'gi.contracts/chatroom/makeEmotion': {\n      validate: objectOf({\n        id: string,\n        emoticon: string\n      }),\n      process ({ data, meta, contractID }, { state }) {\n        if (!state.saveMessage) {\n          return\n        }\n        const { id, emoticon } = data\n        const msgIndex = findMessageIdx(id, state.messages)\n        if (msgIndex >= 0) {\n          let emoticons = cloneDeep(state.messages[msgIndex].emoticons || {})\n          if (emoticons[emoticon]) {\n            const alreadyAdded = emoticons[emoticon].indexOf(meta.username)\n            if (alreadyAdded >= 0) {\n              emoticons[emoticon].splice(alreadyAdded, 1)\n              if (!emoticons[emoticon].length) {\n                delete emoticons[emoticon]\n                if (!Object.keys(emoticons).length) {\n                  emoticons = null\n                }\n              }\n            } else {\n              emoticons[emoticon].push(meta.username)\n            }\n          } else {\n            emoticons[emoticon] = [meta.username]\n          }\n          if (emoticons) {\n            Vue.set(state.messages[msgIndex], 'emoticons', emoticons)\n          } else {\n            Vue.delete(state.messages[msgIndex], 'emoticons')\n          }\n        }\n      },\n      sideEffect ({ contractID, hash }) {\n        emitMessageEvent({ contractID, hash })\n      }\n    }\n  }\n})\n"],
  "mappings": "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",
  "names": []
}
